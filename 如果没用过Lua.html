<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="true" data-theme="light" data-rh="lang,dir,class,data-has-hydrated"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title>如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0" data-rh="true"><meta property="og:title" content="如果没用过Lua | 星火编辑器文档" data-rh="true"><meta name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下" data-rh="true"><meta property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下" data-rh="true"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/6ea21509.7a435929.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/9f1c1681.e2e67d93.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/56a83e4f.c37cc10c.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/ebed9051.3f76b11f.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/1a7797f1.d2c4514b.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/569c3bda.d4f8c790.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/f1e0b575.ffe8f84e.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/c68a85a1.f9437521.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/f56f6cd8.d12023f0.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/4616d5e3.63c42492.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/bc2983f0.59ada502.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/bcdd346f.f6b73f5c.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/7ceb5d3b.2fcc8afd.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/e9ba70d7.f299c6b3.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/897e9f9e.dcc2eafe.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/2f8a06b3.b41cdb37.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/63e82ccc.e1009338.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/01a3c5c5.c3fa4780.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/c8277538.e458511d.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/06e683dc.2ff18bfe.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5524c41f.0bf48278.js"></head>
<body class="navigation-with-keyboard" data-rh="class" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light" data-rh="lang,dir,class"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title>如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0" data-rh="true"></head>
<body class="navigation-with-keyboard" data-rh="class" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="false" data-theme="light"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
<!DOCTYPE html><html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-技术文档/服务端Lua API/如果没用过Lua" data-has-hydrated="true" data-theme="light" data-rh="lang,dir,class,data-has-hydrated"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title>如果没用过Lua | 星火编辑器文档</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="如果没用过Lua | 星火编辑器文档"><meta data-rh="true" name="description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><meta data-rh="true" property="og:description" content="本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://doc.sce.xd.com/技术文档/服务端Lua API/如果没用过Lua" hreflang="x-default"><link rel="stylesheet" href="https://doc.sce.xd.com/assets/css/styles.9a00e112.css">
<script src="https://doc.sce.xd.com/assets/js/runtime~main.355147e2.js" defer="defer"></script>
<script src="https://doc.sce.xd.com/assets/js/main.2d8b02e8.js" defer="defer"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0" data-rh="true"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5524c41f.0bf48278.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/2f8a06b3.b41cdb37.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/1a7797f1.d2c4514b.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/569c3bda.d4f8c790.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/e9ba70d7.f299c6b3.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/01a3c5c5.c3fa4780.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/7ceb5d3b.2fcc8afd.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/ebed9051.3f76b11f.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/f56f6cd8.d12023f0.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/6ea21509.7a435929.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/bc2983f0.59ada502.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/63e82ccc.e1009338.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/06e683dc.2ff18bfe.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/9f1c1681.e2e67d93.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/c8277538.e458511d.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/c68a85a1.f9437521.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/56a83e4f.c37cc10c.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/bcdd346f.f6b73f5c.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/f1e0b575.ffe8f84e.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/4616d5e3.63c42492.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/5e95c892.5cec7adb.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/aba21aa0.848e9e26.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a7bd4aaa.d1f900d6.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/22dd74f7.6a0d4fae.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/a94703ab.9ebd04e2.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/0e384e19.dba95552.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/17896441.d678a833.js"><link rel="prefetch" href="https://doc.sce.xd.com/assets/js/897e9f9e.dcc2eafe.js"></head>
<body class="navigation-with-keyboard" data-rh="class" style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="星火编辑器文档" class="themedComponent_mlkZ themedComponent--light_NVdE"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">星火编辑器文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP" type="button" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">欢迎使用星火编辑器！</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">新人必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">更新日志</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">地形编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">资源相关</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">数据编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">触发编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">界面编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">血条编辑器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏机制与交互</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏内预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">局外大厅预制功能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">协作开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">功能示例项目</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">创作者中心</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">背景知识·商业化·分成规则·合同·分级流量扶持</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">游戏上线全流程解析</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">星火月度报告</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/技术文档/服务端Lua API/如果没用过Lua">技术文档-使用可视化的开发者请忽略此文档</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">代码开发必读</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端Lua API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/简介">Lua脚本简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/技术文档/服务端Lua API/我们对Lua做的修改">我们对Lua做的修改</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">如果没用过Lua</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">单位</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">状态机</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">物品</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">区域</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">玩家</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">一些概念</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">游戏</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">计时器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">触发器和事件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">技能</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">Buff</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">效果节点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">表现</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">简易控件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">云变量</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">其它</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">AI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">运动器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">闪电</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">小地图</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">点</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">镜头</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">音效</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">选取器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">创收相关</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端Lua API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端TS API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">枚举文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">服务端面向对象 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向过程 API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/技术文档/服务端Lua API/如果没用过Lua">客户端面向对象 API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/技术文档/服务端Lua API/如果没用过Lua">UGC小游戏</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_SLhD"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">技术文档-使用可视化的开发者请忽略此文档</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">服务端Lua API</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">如果没用过Lua</span><meta itemprop="position" content="3"></li></ul><div class="copyButton">复制链接</div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>如果没用过Lua</h1></header><p>本文假设你有其它语言的基础（如C++）但不了解Lua，想要快速地了解以下</p>
<p>常规语法就不介绍了，主要列了些Lua和其它语言的不同，和一些其它注意事项</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法快速测试">语法快速测试<a class="hash-link" aria-label="语法快速测试的直接链接" title="语法快速测试的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">​</a></h2>
<p>对lua语法不明确的，可以在这儿<code>https://www.lua.org/cgi-bin/demo</code>文本框里直接跑一下。引擎对lua作了少量的修改，即有少量情况lua官网跑lua的结果和我们引擎跑的结果会不同。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="动态类型">动态类型<a class="hash-link" aria-label="动态类型的直接链接" title="动态类型的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">​</a></h2>
<p>这几乎是脚本语言的共同特点。即你拿到一个变量，不一定就是你认为的那个类型，他可能在不同的情况下有不同的类型。如果不确定一个变量的类型，可以用type来判断：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    if type(value) == 'table' then</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多返回值">多返回值<a class="hash-link" aria-label="多返回值的直接链接" title="多返回值的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">​</a></h2>
<p>函数可以返回多个返回值。如果你用的地方不想要多个，你可以丢弃后面的变量(Python这么写的话会报错)。例如：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local function get_unit_info()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        --- do something</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return hp, mp, attack, defense</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local unit_hp, unit_mp = get_unit_info()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table">table<a class="hash-link" aria-label="table的直接链接" title="table的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#table">​</a></h2>
<p>在lua里，数组和哈希表都是table。或者你可以理解为，一个lua的table同时包含了一个数组和一个哈希表，只不过我们通常不会同时使用table的数组和哈希表功能。</p>
<p>table作为数组的话，下标从1开始，通常用ipairs遍历，用数字下标读写。用#返回长度。注意长度的定义是从下标1开始，直到遇到nil，看有多少个元素。</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for i, x in ipairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- i是下标, x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    local t2 = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[2] = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出0，因为下标1是nil。这时候如果用ipairs遍历，也是遍历不出东西的。</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    t2[1] = 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(#t2) -- 输出2。另外要注意如果数组里元素很多，那么得避免频繁使用#，因为table取长度的操作不是O(1)的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>table作为哈希表的话，用pairs遍历。pairs会遍历table的所有内容，包括ipairs的。即pairs的结果包含ipairs。用ipairs合适的地方应优先使用ipairs，效率高些(不过我没实际测试过)</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    for x in pairs(t) do</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        -- x是内容</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="闭包">闭包<a class="hash-link" aria-label="闭包的直接链接" title="闭包的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">​</a></h2>
<p>闭包的概念不少语言都有，不过C/C++没有。以下是官方文档的个例子：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    function newCounter ()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        local i = 0</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        return function ()   -- 匿名函数</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            i = i + 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">            return i</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    </span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c1 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>闭包(closure)就是一个函数加上所有他需要访问到的上值(upvalue)。上面的例子里i就是上值。如果接着上面的例子再写两行：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    c2 = newCounter()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c1())  --&gt; 3</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(c2())  --&gt; 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以看到，再次调<code>newCounter()</code>又产生了个新的闭包，彼此的上值是独立的</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="语法糖">语法糖<a class="hash-link" aria-label="语法糖的直接链接" title="语法糖的直接链接" href="/技术文档/服务端Lua API/如果�没用过Lua#语法糖">​</a></h2>
<p>就是一些简写代码的方式.. 有时候会坑不熟悉Lua的人。常用的几个:</p>
<p>如果只有一个参数，且该参数是字符串或table，那么可以省略括号，如<code>print 'hi'</code>其实就是<code>print('hi')</code></p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 上下两段代码其实是一个意思</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    attack:add_damage(</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        source = source,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        target = target,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        damage = 100,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    )</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再看这一段:</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation '开枪'</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    }</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 完整的写法：</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    unit2:play_animation('开枪') (</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    {</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        speed = 1.0,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        loop = false,</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">        part = 1</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    })</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    -- 也就是说，unit2:play_animation('开枪') 返回了一个方法(其实是个带上值的闭包)，然后我们给这个方法传了一个table参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" class="clean-btn" aria-label="切换自动换行" title="切换自动换行"><svg viewBox="0 0 24 24" class="wordWrapButtonIcon_Bwma" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>另一个常见坑：</p>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local tb = {}</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb:getName1()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- table: xxxxxxx(地址)</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">function tb.getName2()</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    print(self) -- nil</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用:的话，相当于把冒号前面的变量作为self传给方法。注意现在我们封装的api，有的用的是冒号，有的用的是点，别弄错了..</p>
<p>另外，table的下标如果是常量字符串，可以直接用点访问。即<code>a.x = 10</code>等价于<code>a["x"] = 10</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="元表">元表<a class="hash-link" aria-label="元表的直接链接" title="元表的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#元表">​</a></h2>
<p>table可以定义一些元方法，用C++的说法，可以近似的理解为可以重载这些元方法。需要具体了解的再自己搜一下</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多行字符串">多行字符串<a class="hash-link" aria-label="多行字符串的直接链接" title="多行字符串的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">​</a></h2>
<div class="language-lua codeBlockContainer_Ckt0 theme-code-block" style="--prism-color: #bfc7d5; --prism-background-color: #292d3e;"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lua codeBlock_bY9V thin-scrollbar" style="color: rgb(191, 199, 213); background-color: rgb(41, 45, 62);"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str = [[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    hello</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    world</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]]</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">local str2 = [==[</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    this is also</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    a multiline string</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    开始的时候带几个等号，结束的时候也带几个等号</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">    有时候我们也拿多行字符串当多行注释用，因为Lua似乎没有多行注释？</span><br></span><span class="token-line" style="color: rgb(191, 199, 213);"><span class="token plain">]==]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-和-or">and 和 or<a class="hash-link" aria-label="and 和 or的直接链接" title="and 和 or的直接链接" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">​</a></h2>
<p>a and b -- 如果a 为false，则返回a，否则返回b</p>
<p>a or b -- 如果a 为true，则返回a，否则返回b</p>
<p><a href="https://blog.csdn.net/heyuchang666/article/details/51005550" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/heyuchang666/article/details/51005550</a></p>
<p>所以可以用<code>a and b or c</code>来实现c语言里<code>a ? b : c</code>的效果</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/技术文档/服务端Lua API/我们对Lua做的修改"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">我们对Lua做的修改</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/技术文档/服务端Lua API/单位/单位属性"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">单位属性</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight table-of-contents__link--active" href="/技术文档/服务端Lua API/如果没用过Lua#语法快速测试">语法快速测试</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#动态类型">动态类型</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多返回值">多返回值</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#table">table</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#闭包">闭包</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#语法糖">语法糖</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#元表">元表</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#多行字符串">多行字符串</a></li><li><a class="table-of-contents__link toc-highlight" href="/技术文档/服务端Lua API/如果没用过Lua#and-和-or">and 和 or</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 星火编辑器. Built with Docusaurus.</div></div></div></footer></div>

</body></html>
